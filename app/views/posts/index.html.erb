<p style="color: green"><%= notice %></p>

<h1>Posts</h1>

<div id="posts">
  <% @posts.each do |post| %>
    <%= render post %>

    <h2> Comments: </h2>
    <% if post.comments.empty? %>
      <p>No comments for this post...</p>
    <% else %>
      <ul>
      <% post.comments.each do |r| %>
        <li> <%= User.find(r.user_id).email %> - <%= r.body %> - <%= r.like %> -
         <!--<%= if can? :edit, (r.user_id) then button_to 'Edit comment', (r.user_id), method: :edit, data:{ confirm: 'Are you sure?' } end%>-->
         <!--<%= link_to 'Delete', r, :method => :delete, data: { confirm: 'Are you sure?' }%>-->
      <% end %>
      </ul>
    <% end %>

    <%= link_to "Add a comment", new_post_comment_path(post) %>

    <%= link_to "Edit this post", edit_post_path(post) %> |
    
    <%= if can? :destroy, post then button_to 'Delete post', post, method: :delete, data:{ confirm: 'Are you sure?' } end%>
  
    
  <% end %>
</div>

<%= link_to "New post", new_post_path %>
