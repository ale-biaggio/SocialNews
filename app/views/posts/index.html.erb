<p class="alert alert-danger"><%= alert %></p>
<p class="alert alert-success"><%= notice %></p>

<% if current_user!=nil %><br>
  <div class="container">
    <div class="row">
      <div class="col-4" style="text-align:center;">
        <%= link_to "Tutte le notizie", root_path(), class: "btn btn btn-primary home-buttons" %>
      </div>
      <div class="col-4" style="text-align:center;">
        <%= link_to "Seguiti", feed_path(), class: "btn btn-outline-primary home-buttons" %>
      </div>
      <div class="col-4" style="text-align:center;">
        <%= link_to "Esplora", maps_path(), class: "btn btn-outline-primary home-buttons" %>
      </div>
    </div>
  </div>
<% end %>

<br>

<div class="container" style="text-align: center;">
  <div class="row align-items-center d-flex justify-content-between">
    <% Post.all_category.each do |category| %>
      <div class="col">
        <%= link_to category, posts_path(category: category), class: "category-link btn btn-outline-success home-buttons" %>
      </div>
    <% end %>
    <div class="col-auto">
      <a href="#" class="btn btn-outline-success home-buttons btn-link" id="show-form-btn"><i class="fa-solid fa-magnifying-glass" style="color: #14a112;"></i></a>
    </div>
  </div>
  <div id="form-container" style="display: none; text-align: right; ">
    <%= form_tag(posts_path, method: "get") do %>
      <%= text_field_tag(:keyword, nil, placeholder: 'Cerca argomento...',class: "searchbar2") %>
    <% end %>
  </div>
</div>

<script>
  $(document).ready(function() {
    // Aggiungi la classe "selected-category" al clic sul link della categoria
    $(".category-link").click(function() {
      $(".category-link").removeClass("selected-category");
      $(this).addClass("selected-category");
    });

    // Mostra/nascondi il form di ricerca
    $("#show-form-btn").click(function() {
      $("#form-container").toggle();
    });
  });
</script>

<br>

<div class="container" style="width: 60%;">
  <h1>News:</h1>
  <%= link_to image_tag("pencil.png", style: "width: 50px;"), new_post_path, class: "btn btn-outline-primary pencil"%>
</div>
<br>
<%= render @posts %>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    var alerts = document.querySelectorAll(".alert");

    alerts.forEach(function(alert) {
      if (alert.innerHTML.trim() !== "") {
        alert.classList.add("show");
      }
    });
  });

</script>